<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; background-color: #f4f7f6; }
        .login-container { width: 400px; background: white; padding: 40px 30px; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #333; margin-bottom: 30px; }
        
        .form-group { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-weight: bold; font-size: 0.9em; color: #555; }
        input { width: 100%; padding: 12px; box-sizing: border-box; border: 1px solid #ddd; border-radius: 6px; font-size: 1em; }
        
        /* 로그인 버튼 */
        .btn-login { width: 100%; padding: 14px; background-color: #28a745; color: white; border: none; border-radius: 6px; cursor: pointer; font-size: 1.1em; font-weight: bold; margin-top: 10px; }
        .btn-login:hover { background-color: #03A9F4; }

        /* 하단 링크 */
        .login-links { display: flex; justify-content: center; gap: 15px; margin-top: 20px; font-size: 0.85em; color: #666; }
        .login-links a { color: #666; text-decoration: none; }
        .login-links a:hover { text-decoration: underline; }

        /* 소셜 로그인 구분선 */
        .divider { display: flex; align-items: center; text-align: center; margin: 30px 0; color: #aaa; font-size: 0.8em; }
        .divider::before, .divider::after { content: ''; flex: 1; border-bottom: 1px solid #eee; }
        .divider:not(:empty)::before { margin-right: .5em; }
        .divider:not(:empty)::after { margin-left: .5em; }

        /* 소셜 버튼 공통 */
        .social-btn { display: flex; align-items: center; justify-content: center; width: 100%; height: 50px; border-radius: 6px; cursor: pointer; border: none; font-size: 1em; font-weight: 500; margin-bottom: 10px; text-decoration: none; }
        
        /* 카카오 버튼 (공식 컬러: #FEE500) */
        .btn-kakao { background-color: #FEE500; color: #191919; }
        .btn-kakao:hover { background-color: #fada0a; }
        .btn-kakao img { width: 20px; margin-right: 10px; cursor: pointer;}

        /* 네이버 버튼 (공식 컬러: #03C75A) */
        .btn-naver { background-color: #03C75A; color: white; }
        .btn-naver:hover { background-color: #02b350; }
        .btn-naver img { width: 25px; margin-right: 6px; cursor: pointer;}
    </style>
</head>
<body>
    <div class="login-container">
        <h2>로그인</h2>
        
        <form id="loginForm">
            <div class="form-group">
                <label>이메일</label>
                <input type="email" id="email" name="email" required placeholder="example@mail.com">
            </div>
            <div class="form-group">
                <label>비밀번호</label>
                <input type="password" id="password" name="password" required placeholder="비밀번호 입력">
            </div>
            <button type="submit" class="btn-login">로그인</button>
        </form>

        <div class="login-links">
            <a href="/find_account.html">아이디/비밀번호 찾기</a>
            <span>|</span>
            <a href="/signup.html">회원가입</a>
        </div>

        <div class="divider">또는 소셜 계정으로 로그인</div>

        <!-- 카카오 로그인 버튼 -->
        <a href="/auth/kakao" class="social-btn btn-kakao">
            <img src="../static/img/kakao_login_logo.png" alt="K">
            카카오로 시작하기
        </a>

        <!-- 네이버 로그인 버튼 -->
        <a href="/auth/naver" class="social-btn btn-naver">
            <img src="../static/img/naver_login_logo.png" alt="N">
            네이버로 시작하기
        </a>
    </div>

    <script>
        document.getElementById('loginForm').onsubmit = async (e) => {
            e.preventDefault();

            const data = {
                email: document.getElementById('email').value,
                password: document.getElementById('password').value
            };

            try {
                const response = await fetch('/api/v1/auth/login', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                if (response.status === 400) {
                    const result = await response.json();
                    alert(result.detail);
                    return;
                }

                if (response.ok) {
                    const result = await response.json();
                    alert("로그인 성공!");
                    // 로그인 성공 시 메인 페이지나 마이페이지로 이동
                    // location.href = "/mypage.html";
                } else {
                    alert("로그인 실패: " + (result.detail || "정보를 확인해주세요."));
                }
            } catch (err) {
                alert("서버 통신 오류가 발생했습니다.");
            }
        };
    </script>
</body>
</html>